namespace SteamPipe.Tests.Models
{
    public class CommunitySearchTests
    {
        [Fact]
        public void CanBeDeserialized()
        {
            const string json = """
{"success":1,"search_text":"backpack hero","search_result_count":7,"search_filter":"groups","search_page":1,"html":"\t<div id=\"community_searchresults_pagination\" class=\"community_searchresults_container\">\r\n\t\t<span class=\"community_searchresults_title\">Groups<\/span>\r\n\t\t\t\t<span class=\"community_searchresults_paging\">\r\n\t\t\t\t\t\tShowing 1 - 7 of 7\t\t\t\t<\/span>\r\n\t<div style=\"clear: both\"><\/div>\r\n\t<\/div>\r\n\t\t\t\t\t\t\t<div data-panel=\"{&quot;clickOnActivate&quot;:&quot;firstChild&quot;}\" class=\"search_row group\">\r\n\t<div class=\"search_gamegroup_avatar_holder\"><a href=\"https:\/\/steamcommunity.com\/app\/1970580\"><img src=\"https:\/\/shared.akamai.steamstatic.com\/store_item_assets\/steam\/apps\/1970580\/header.jpg?t=1725818916\"><\/a><\/div>\r\n\t<div class=\"searchPersonaInfo\">\r\n\t\t<div>\r\n\t\t\t<a class=\"searchPersonaName\" href=\"https:\/\/steamcommunity.com\/app\/1970580\">Backpack Hero<\/a> <span class=\"search_group_type\">- Game hub<\/span>\r\n\t\t<\/div>\r\n\t\t<div>\r\n\t\t\t<span style=\"color: whitesmoke\">32,076<\/span> members in this group\t\t<\/div>\r\n\t\t\t\t<div>&nbsp;<\/div>\r\n\t<\/div>\r\n\t<br clear=\"left\" \/>\r\n\t<div class=\"search_match_info\">\r\n\t\t\t\t\t\t\t<div class=\"search_group_summary_text\"><\/div>\r\n\t\t\r\n\t<\/div>\r\n<\/div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div data-panel=\"{&quot;clickOnActivate&quot;:&quot;firstChild&quot;}\" class=\"search_row group\">\r\n\t<div class=\"search_group_avatar_holder\"><a href=\"https:\/\/steamcommunity.com\/groups\/lynettshop\"><img src=\"https:\/\/avatars.akamai.steamstatic.com\/fef49e7fa7e1997310d705b2a6158ff8dc1cdfeb_full.jpg\"><\/a><\/div>\r\n\t<div class=\"searchPersonaInfo\">\r\n\t\t<div>\r\n\t\t\t<a class=\"searchPersonaName\" href=\"https:\/\/steamcommunity.com\/groups\/lynettshop\">Lynett Shop<\/a> <span class=\"search_group_type\">- Public group<\/span>\r\n\t\t<\/div>\r\n\t\t<div>\r\n\t\t\t<span style=\"color: whitesmoke\">346<\/span> members in this group\t\t<\/div>\r\n\t<\/div>\r\n\t\t<br clear=\"both\" \/>\r\n\t<div class=\"search_match_info\">\r\n\t\t\t\t\t\t\t<div class=\"search_group_summary_text\">[b][u][h1].:Nhận order item:.[\/h1][\/u][\/b] [quote] -Mình nhận đặt mọi loại set của các hero, kể cả những set mới ra trong Store, hay những set đã ra lâu (sẽ giảm 15-75% tùy theo thời gian) đến những set không có trong Store.<\/div>\r\n\t\t\r\n\t<\/div>\r\n<\/div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div data-panel=\"{&quot;clickOnActivate&quot;:&quot;firstChild&quot;}\" class=\"search_row group\">\r\n\t<div class=\"search_group_avatar_holder\"><a href=\"https:\/\/steamcommunity.com\/groups\/unturnedthelounge\"><img src=\"https:\/\/avatars.akamai.steamstatic.com\/280f7f88d00f02f58e87e6e872a4db38e983bab7_full.jpg\"><\/a><\/div>\r\n\t<div class=\"searchPersonaInfo\">\r\n\t\t<div>\r\n\t\t\t<a class=\"searchPersonaName\" href=\"https:\/\/steamcommunity.com\/groups\/unturnedthelounge\">Unturned The Lounge<\/a> <span class=\"search_group_type\">- Public group<\/span>\r\n\t\t<\/div>\r\n\t\t<div>\r\n\t\t\t<span style=\"color: whitesmoke\">123<\/span> members in this group\t\t<\/div>\r\n\t<\/div>\r\n\t\t<br clear=\"both\" \/>\r\n\t<div class=\"search_match_info\">\r\n\t\t\t\t\t\t\t<div class=\"search_group_summary_text\">[h1]The most fun &amp; immersive roleplaying Unturned server, well, the admins at least. We try to keep the community filled with only good roleplayers &amp; don't hesitate to kick\/ban trolls. Come &amp; relax with us! WE MOVED TO Russia!<\/div>\r\n\t\t\r\n\t<\/div>\r\n<\/div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div data-panel=\"{&quot;clickOnActivate&quot;:&quot;firstChild&quot;}\" class=\"search_row group\">\r\n\t<div class=\"search_group_avatar_holder\"><a href=\"https:\/\/steamcommunity.com\/groups\/sleakscouts\"><img src=\"https:\/\/avatars.akamai.steamstatic.com\/f9e231adc9786895a38950fe17cf9b6a0d7228a6_full.jpg\"><\/a><\/div>\r\n\t<div class=\"searchPersonaInfo\">\r\n\t\t<div>\r\n\t\t\t<a class=\"searchPersonaName\" href=\"https:\/\/steamcommunity.com\/groups\/sleakscouts\">Sleak Scouts<\/a> <span class=\"search_group_type\">- Public group<\/span>\r\n\t\t<\/div>\r\n\t\t<div>\r\n\t\t\t<span style=\"color: whitesmoke\">95<\/span> members in this group\t\t<\/div>\r\n\t<\/div>\r\n\t\t<br clear=\"both\" \/>\r\n\t<div class=\"search_match_info\">\r\n\t\t\t\t\t\t\t<div class=\"search_group_summary_text\">░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░ ░█░█░█░█▀▀▀░█░░░░█▀▀▀░█▀▀█░█▀█▀█░█▀▀▀░ ░█░█░█░█▀▀▀░█░░░░█░░░░█░░█░█░█░█░█▀▀▀░ ░▀▀▀▀▀░▀▀▀▀░▀▀▀▀░▀▀▀▀░▀▀▀▀░▀░▀░▀░▀▀▀▀░ ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░ Contrary to popular belief, Scout isn't just...<\/div>\r\n\t\t\r\n\t<\/div>\r\n<\/div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div data-panel=\"{&quot;clickOnActivate&quot;:&quot;firstChild&quot;}\" class=\"search_row group\">\r\n\t<div class=\"search_group_avatar_holder\"><a href=\"https:\/\/steamcommunity.com\/groups\/PolskaKoxi\"><img src=\"https:\/\/avatars.akamai.steamstatic.com\/39415b9cb19d4bbcde5dfa132689f467fc6c4b81_full.jpg\"><\/a><\/div>\r\n\t<div class=\"searchPersonaInfo\">\r\n\t\t<div>\r\n\t\t\t<a class=\"searchPersonaName\" href=\"https:\/\/steamcommunity.com\/groups\/PolskaKoxi\">Polska Koxi<\/a> <span class=\"search_group_type\">- Public group<\/span>\r\n\t\t<\/div>\r\n\t\t<div>\r\n\t\t\t<span style=\"color: whitesmoke\">64<\/span> members in this group\t\t<\/div>\r\n\t<\/div>\r\n\t\t<br clear=\"both\" \/>\r\n\t<div class=\"search_match_info\">\r\n\t\t\t\t\t\t\t<div class=\"search_group_summary_text\">Polecane Gry Na Android\/iOS: - Castle Clash (Adroid, iOS) - Hero Siege (Android) - Battle Pillars (Android) - Home an unique horror adventure game (iOS) - Kingdom Clicker (iOS) - Crossy Road (Android, iOS) - Shooty Skies (iOS) - Angry...<\/div>\r\n\t\t\r\n\t<\/div>\r\n<\/div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div data-panel=\"{&quot;clickOnActivate&quot;:&quot;firstChild&quot;}\" class=\"search_row group\">\r\n\t<div class=\"search_group_avatar_holder\"><a href=\"https:\/\/steamcommunity.com\/groups\/FmLRaffleGroup\"><img src=\"https:\/\/avatars.akamai.steamstatic.com\/769fca064afbf64b5d16301130ca08333e6a0bba_full.jpg\"><\/a><\/div>\r\n\t<div class=\"searchPersonaInfo\">\r\n\t\t<div>\r\n\t\t\t<a class=\"searchPersonaName\" href=\"https:\/\/steamcommunity.com\/groups\/FmLRaffleGroup\">|FmL| Official Raffle Group<\/a> <span class=\"search_group_type\">- Private group<\/span>\r\n\t\t<\/div>\r\n\t\t<div>\r\n\t\t\t<span style=\"color: whitesmoke\">65<\/span> members in this group\t\t<\/div>\r\n\t<\/div>\r\n\t\t<br clear=\"both\" \/>\r\n\t<div class=\"search_match_info\">\r\n\t\t\t\t\t\t\t<div class=\"search_group_summary_text\">As most of you know, i have been doing a number of raffles, thats all been fairly successful. I've decided to make a group for all the people who buy into my raffles so you all know what's been raffled off at the time.<\/div>\r\n\t\t\r\n\t<\/div>\r\n<\/div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div data-panel=\"{&quot;clickOnActivate&quot;:&quot;firstChild&quot;}\" class=\"search_row group\">\r\n\t<div class=\"search_group_avatar_holder\"><a href=\"https:\/\/steamcommunity.com\/groups\/JuicyRafflesGroup\"><img src=\"https:\/\/avatars.akamai.steamstatic.com\/34faec0c60018ff0911e35cfd10d87174995d084_full.jpg\"><\/a><\/div>\r\n\t<div class=\"searchPersonaInfo\">\r\n\t\t<div>\r\n\t\t\t<a class=\"searchPersonaName\" href=\"https:\/\/steamcommunity.com\/groups\/JuicyRafflesGroup\">Juicy Raffles<\/a> <span class=\"search_group_type\">- Public group<\/span>\r\n\t\t<\/div>\r\n\t\t<div>\r\n\t\t\t<span style=\"color: whitesmoke\">53<\/span> members in this group\t\t<\/div>\r\n\t<\/div>\r\n\t\t<br clear=\"both\" \/>\r\n\t<div class=\"search_match_info\">\r\n\t\t\t\t\t\t\t<div class=\"search_group_summary_text\">[h1]This is a New Raffling Group Created by Juicebox Hero![\/h1] [i][b]Raffles will begin as weekly, then hopefully more frequently. Here's how it works![\/b][\/i] 1. An item will be selected for raffling. 2.<\/div>\r\n\t\t\r\n\t<\/div>\r\n<\/div>\r\n\t\t\t\t\t\t\t<div style=\"clear: both\"><\/div>\r\n\t<div id=\"community_searchresults_pagination\" class=\"community_searchresults_container\">\r\n\t\t<span class=\"community_searchresults_title\">Groups<\/span>\r\n\t\t\t\t<span class=\"community_searchresults_paging\">\r\n\t\t\t\t\t\tShowing 1 - 7 of 7\t\t\t\t<\/span>\r\n\t<div style=\"clear: both\"><\/div>\r\n\t<\/div>\r\n\r\n\r\n"}
""";
            var response = TestSetup.CreateResponse(System.Net.HttpStatusCode.OK, json);
            var searchResult = JsonDeserializer.DeserializeResponse<CommunitySearch>(response).Body;

            Assert.Equal("backpack hero", searchResult.SearchText);
            Assert.Equal(7, searchResult.SearchResultCount);
            Assert.Equal("groups", searchResult.SearchFilter);
            Assert.Equal(1, searchResult.SearchPage);
            Assert.Equal(1, searchResult.Success);
            Assert.NotEmpty(searchResult.Html);
        }
    }
}